(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{1061:function(t,n,e){"use strict";e(23);n.a={upload:function(t,n,e){var l=e.format,o=e.cnapi,r=e.metaData;return new Promise((function(e,c){var d=new FormData;d.append("image",n),t.$axios.post("/upload_image",d,{cnapi:o,params:{format:l||"webp"}}).then((function(t){var n=o?"https://dogcloud-mikutools-cnapi.cdn.hatsune.tech":"https://dogcloud-mikutools-api.cdn.hatsune.tech",l=new URL(t.data.data,n),image=new Image;image.src=l,image.onload=function(){e(r?{url:l,e:t}:l)}})).catch(c)}))}}},2760:function(t,n,e){"use strict";e.r(n);var l=e(1061),o={name:"Tts",head:function(){return this.$store.state.currentTool.head},data:function(){return{n:"",file:null,results:"",loading:!1,uploadData:null,language_type:"CHN_ENG",lan_list:{CHN_ENG:"中英混合",ENG:"英文",JAP:"日语",KOR:"韩语",FRE:"法语",SPA:"西班牙语",POR:"葡萄牙语",GER:"德语",ITA:"意大利语",RUS:"俄语"}}},computed:{resultsText:function(){return!!this.results&&this.results.map((function(t){return t.words})).join("\n")}},methods:{handleChange:function(t){var n=t.target.files;if(!n.length)return!1;var e=n[0];e.size/1024/1024>5?(this.n="",this.$notify.error({title:"识别失败",message:"请选择大小在5M以内的图片"})):(this.results=null,this.uploadData=null,this.file=e)},start:function(){return!!this.file&&(!this.loading&&(this.loading=!0,this.results=null,void(this.uploadData?this.ocr():(this.uploadData=null,this.uploadImg()))))},uploadImg:function(){var t=this;l.a.upload(this,this.file,{format:"jpeg"}).then((function(n){t.uploadData=n,t.ocr()})).catch((function(n){t.$notify.error({title:"上传图片失败",message:n}),t.loading=!1}))},ocr:function(){var t=this;this.$axios.post("/ocr",{url:this.uploadData,language_type:this.language_type}).then((function(n){t.loading=!1,t.results=n.data.data})).catch((function(n){t.$notify.error({title:"识别失败",message:n}),t.loading=!1}))}}},r=e(5),component=Object(r.a)(o,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"ocr"},[e("nya-container",{attrs:{title:"文本识别"}},[e("div",{staticClass:"mb-15"},[e("div",{staticClass:"nya-subtitle"},[t._v("\n                识别图片\n            ")]),e("el-input",{attrs:{type:"file",accept:"image/*",disabled:t.loading,placeholder:t.n?t.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件"},nativeOn:{change:function(n){return t.handleChange(n)}},model:{value:t.n,callback:function(n){t.n=n},expression:"n"}})],1),e("div",{staticClass:"mb-15"},[e("div",{staticClass:"nya-subtitle"},[t._v("\n                识别语种选择\n            ")]),e("el-select",{staticClass:"full-width",attrs:{disabled:t.loading},model:{value:t.language_type,callback:function(n){t.language_type=n},expression:"language_type"}},t._l(t.lan_list,(function(t,n){return e("el-option",{key:n,attrs:{label:t,value:n}})})),1)],1),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.start}},[t._v("\n            "+t._s(t.loading?"识别中":"开始识别")+"\n        ")])],1),t.resultsText?e("nya-container",{attrs:{title:"识别成功"}},[e("nya-copy",{attrs:{copy:t.resultsText}},[e("span",{domProps:{textContent:t._s(t.resultsText)}})])],1):t._e(),e("nya-container",{attrs:{title:"说明"}},[e("ul",{staticClass:"nya-list"},[e("li",[t._v("不支持内容过多的文本识别")])])])],1)}),[],!1,null,null,null);n.default=component.exports}}]);