(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{1030:function(t,n,e){"use strict";e(131),e(132),e(23);var o=e(191).MD5;n.a=function(){return o(Math.random().toString()).toString()}},1031:function(t,n,e){"use strict";e(23);n.a=function(t){return new Promise((function(n,e){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){return n(o.result)},o.onerror=function(t){return e(t)}}))}},1089:function(t,n){},1090:function(t,n){},1091:function(t,n){},1180:function(t,n,e){var content=e(2332);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(13).default)("3ba6297f",content,!0,{sourceMap:!1})},2316:function(t,n,e){t.exports=e.p+"img/d0e094c.png"},2317:function(t,n,e){t.exports=e.p+"img/8c9f0c7.png"},2318:function(t,n,e){t.exports=e.p+"img/acaece6.png"},2319:function(t,n,e){t.exports=e.p+"img/b630b17.png"},2320:function(t,n,e){t.exports=e.p+"img/052e32f.png"},2321:function(t,n,e){t.exports=e.p+"img/7b4da9a.png"},2322:function(t,n,e){t.exports=e.p+"img/a3443f9.png"},2323:function(t,n,e){t.exports=e.p+"img/6bcdba9.png"},2324:function(t,n,e){t.exports=e.p+"img/0a0206e.png"},2325:function(t,n,e){t.exports=e.p+"img/39f5d5c.png"},2326:function(t,n,e){t.exports=e.p+"img/20f20c4.png"},2327:function(t,n,e){t.exports=e.p+"img/1a9c8e4.png"},2328:function(t,n,e){t.exports=e.p+"img/651a575.png"},2329:function(t,n,e){t.exports=e.p+"img/bd5fb0c.png"},2330:function(t,n,e){t.exports=e.p+"img/476f57a.png"},2331:function(t,n,e){"use strict";var o=e(1180);e.n(o).a},2332:function(t,n,e){(n=e(12)(!1)).push([t.i,".mask .el-select-dropdown .preview{display:flex;justify-content:space-between;align-content:center}.mask .el-select-dropdown .preview .el-image+div{line-height:3.125rem}.mask .el-select-dropdown .el-select-dropdown__item{height:4.375rem;padding-top:.625rem;padding-bottom:.625rem}.mask .el-select-dropdown .el-select-dropdown__item img{width:auto;height:3.125rem}",""]),t.exports=n},2751:function(t,n,e){"use strict";e.r(n);e(23);var o=e(1088),r=e(257),c=e(1030),l=e(1031),d={name:"ChristmasHat",data:function(){return{n:null,src:[e(2316),e(2317),e(2318),e(2319),e(2320),e(2321),e(2322),e(2323),e(2324),e(2325),e(2326),e(2327),e(2328),e(2329),e(2330)],style:0,logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.fabric.Canvas(this.$refs.canvas)},methods:{handleChange:function(t){var n=this,e=t.target.files;if(!e.length)return!1;var o=e[0];Object(l.a)(o).then((function(t){var image=new Image;image.onload=function(){n.backgroundImage=image,n.$nextTick(n.renderCanvas)},image.src=t}))},renderCanvas:function(){var t=this;this.canvas.clear();var image=this.backgroundImage,n=this.$refs.box.offsetWidth,e=1;image.width>n?(this.canvas.setWidth(n),this.canvas.setHeight(n/image.width*image.height),e=n/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/t.logo.width;image.width>n&&(e=n/2/t.logo.width);var r=new o.fabric.Image(t.logo,{scaleX:e,scaleY:e,left:0,top:0});t.canvas.add(r),r.centerH(),t.canvas.renderAll()}));var r=new o.fabric.Image(image,{scaleX:e,scaleY:e,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(r)},getLogo:function(){var t=this;return new Promise((function(n,e){var image=new Image;image.crossOrigin="anonymous",image.onload=function(){t.logo=image,n(image)},image.onerror=e,image.src=t.src[t.style]}))},save:function(){if(!this.n)return!1;Object(r.a)(this.canvas.toDataURL(),"".concat(Object(c.a)(),".png"))}}},f=(e(2331),e(5)),component=Object(f.a)(d,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"mask"},[e("nya-container",{attrs:{title:"在线加口罩"}},[e("div",{staticClass:"nya-subtitle"},[t._v("\n            请选择要制作的图片\n        ")]),e("el-input",{attrs:{type:"file",accept:"image/*",placeholder:t.n?t.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(n){return t.handleChange(n)}},model:{value:t.n,callback:function(n){t.n=n},expression:"n"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.save},slot:"append"},[t._v("\n                下载\n            ")])],1),e("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n            选择口罩样式\n        ")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:t.style,callback:function(n){t.style=n},expression:"style"}},t._l(t.src,(function(n,o){return e("el-option",{key:o,attrs:{label:"样式："+(o+1),value:o}},[e("div",{staticClass:"preview"},[e("el-image",{attrs:{src:t.src[o],fit:"contain"}}),e("div",[t._v(t._s("样式："+(o+1)))])],1)])})),1)],1),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:t.n,expression:"n"}],attrs:{title:"预览"}},[e("div",{ref:"box",staticClass:"box"},[e("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);n.default=component.exports}}]);