(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1030:function(n,t,e){"use strict";e(131),e(132),e(23);var o=e(191).MD5;t.a=function(){return o(Math.random().toString()).toString()}},1031:function(n,t,e){"use strict";e(23);t.a=function(n){return new Promise((function(t,e){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return t(o.result)},o.onerror=function(n){return e(n)}}))}},1089:function(n,t){},1090:function(n,t){},1091:function(n,t){},1133:function(n,t,e){var content=e(2185);"string"==typeof content&&(content=[[n.i,content,""]]),content.locals&&(n.exports=content.locals);(0,e(13).default)("6ec7eeda",content,!0,{sourceMap:!1})},2154:function(n,t,e){n.exports=e.p+"img/66d86b3.png"},2155:function(n,t,e){n.exports=e.p+"img/1d20340.png"},2156:function(n,t,e){n.exports=e.p+"img/c470911.png"},2157:function(n,t,e){n.exports=e.p+"img/3b5de64.png"},2158:function(n,t,e){n.exports=e.p+"img/ec19f72.png"},2159:function(n,t,e){n.exports=e.p+"img/d80686b.png"},2160:function(n,t,e){n.exports=e.p+"img/5b2cbc2.png"},2161:function(n,t,e){n.exports=e.p+"img/8d3b5ff.png"},2162:function(n,t,e){n.exports=e.p+"img/5c02656.png"},2163:function(n,t,e){n.exports=e.p+"img/bb2dcf4.png"},2164:function(n,t,e){n.exports=e.p+"img/7af3648.png"},2165:function(n,t,e){n.exports=e.p+"img/9afe534.png"},2166:function(n,t,e){n.exports=e.p+"img/5f351a5.png"},2167:function(n,t,e){n.exports=e.p+"img/b397722.png"},2168:function(n,t,e){n.exports=e.p+"img/2565cab.png"},2169:function(n,t,e){n.exports=e.p+"img/ef595d0.png"},2170:function(n,t,e){n.exports=e.p+"img/0e34475.png"},2171:function(n,t,e){n.exports=e.p+"img/73e51fc.png"},2172:function(n,t,e){n.exports=e.p+"img/2aa172e.png"},2173:function(n,t,e){n.exports=e.p+"img/bc8be8c.png"},2174:function(n,t,e){n.exports=e.p+"img/cd3097d.png"},2175:function(n,t,e){n.exports=e.p+"img/e6cf3b9.png"},2176:function(n,t,e){n.exports=e.p+"img/7880c72.png"},2177:function(n,t,e){n.exports=e.p+"img/2cc2bf5.png"},2178:function(n,t,e){n.exports=e.p+"img/e9ddb62.png"},2179:function(n,t,e){n.exports=e.p+"img/1663a2c.png"},2180:function(n,t,e){n.exports=e.p+"img/a980ed6.png"},2181:function(n,t,e){n.exports=e.p+"img/a261c60.png"},2182:function(n,t,e){n.exports=e.p+"img/ab94cf5.png"},2183:function(n,t,e){n.exports=e.p+"img/8a0c60c.png"},2184:function(n,t,e){"use strict";var o=e(1133);e.n(o).a},2185:function(n,t,e){(t=e(12)(!1)).push([n.i,".christmas_hat .el-select-dropdown .preview{display:flex;justify-content:space-between;align-content:center}.christmas_hat .el-select-dropdown .preview .el-image+div{line-height:3.125rem}.christmas_hat .el-select-dropdown .el-select-dropdown__item{height:4.375rem;padding-top:.625rem;padding-bottom:.625rem}.christmas_hat .el-select-dropdown .el-select-dropdown__item img{width:auto;height:3.125rem}",""]),n.exports=t},2700:function(n,t,e){"use strict";e.r(t);e(23);var o=e(1088),c=e(257),r=e(1030),l=e(1031),f={name:"ChristmasHat",data:function(){return{n:null,src:[e(2154),e(2155),e(2156),e(2157),e(2158),e(2159),e(2160),e(2161),e(2162),e(2163),e(2164),e(2165),e(2166),e(2167),e(2168),e(2169),e(2170),e(2171),e(2172),e(2173),e(2174),e(2175),e(2176),e(2177),e(2178),e(2179),e(2180),e(2181),e(2182),e(2183)],style:0,logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.fabric.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var t=this,e=n.target.files;if(!e.length)return!1;var o=e[0];Object(l.a)(o).then((function(n){var image=new Image;image.onload=function(){t.backgroundImage=image,t.$nextTick(t.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,t=this.$refs.box.offsetWidth,e=1;image.width>t?(this.canvas.setWidth(t),this.canvas.setHeight(t/image.width*image.height),e=t/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/n.logo.width;image.width>t&&(e=t/2/n.logo.width);var c=new o.fabric.Image(n.logo,{scaleX:e,scaleY:e,left:0,top:0});n.canvas.add(c),c.centerH(),n.canvas.renderAll()}));var c=new o.fabric.Image(image,{scaleX:e,scaleY:e,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(c)},getLogo:function(){var n=this;return new Promise((function(t,e){var image=new Image;image.crossOrigin="anonymous",image.onload=function(){n.logo=image,t(image)},image.onerror=e,image.src=n.src[n.style]}))},save:function(){if(!this.n)return!1;Object(c.a)(this.canvas.toDataURL(),"".concat(Object(r.a)(),".png"))}}},d=(e(2184),e(5)),component=Object(d.a)(f,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"christmas_hat"},[e("nya-container",{attrs:{title:"在线加圣诞帽"}},[e("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),e("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(t){return n.handleChange(t)}},model:{value:n.n,callback:function(t){n.n=t},expression:"n"}},[e("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                下载\n            ")])],1),e("div",{staticClass:"nya-subtitle mt-15"},[n._v("\n            选择圣诞帽样式\n        ")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:n.style,callback:function(t){n.style=t},expression:"style"}},n._l(n.src,(function(t,o){return e("el-option",{key:o,attrs:{label:"样式："+(o+1),value:o}},[e("div",{staticClass:"preview"},[e("el-image",{attrs:{src:n.src[o],fit:"contain"}}),e("div",[n._v(n._s("样式："+(o+1)))])],1)])})),1)],1),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[e("div",{ref:"box",staticClass:"box"},[e("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);