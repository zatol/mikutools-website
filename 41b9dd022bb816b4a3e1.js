(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1030:function(n,e,t){"use strict";t(131),t(132),t(23);var o=t(191).MD5;e.a=function(){return o(Math.random().toString()).toString()}},1031:function(n,e,t){"use strict";t(23);e.a=function(n){return new Promise((function(e,t){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return e(o.result)},o.onerror=function(n){return t(n)}}))}},1089:function(n,e){},1090:function(n,e){},1091:function(n,e){},2717:function(n,e,t){"use strict";t.r(e);t(23);var o=t(1088),r=t(257),c=t(1030),l=t(1031),h={name:"Cyberpunk2077",data:function(){return{n:null,src:{logo_en:"/images/cyberpunk_2077_logo.png",logo_en_2:"/images/cyberpunk_2077_logo_2.png",logo_en_shadow:"/images/cyberpunk_2077_logo_shadow.png",logo_cn:"/images/cyberpunk_2077_logo_cn.png"},style:"logo_en",logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.fabric.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var e=this,t=n.target.files;if(!t.length)return!1;var o=t[0];Object(l.a)(o).then((function(n){var image=new Image;image.onload=function(){e.backgroundImage=image,e.$nextTick(e.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,e=this.$refs.box.offsetWidth,t=1;image.width>e?(this.canvas.setWidth(e),this.canvas.setHeight(e/image.width*image.height),t=e/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var t=image.width/2/n.logo.width;image.width>e&&(t=e/2/n.logo.width);var r=new o.fabric.Image(n.logo,{scaleX:t,scaleY:t,left:0,top:0});n.canvas.add(r),r.centerH(),n.canvas.renderAll()}));var r=new o.fabric.Image(image,{scaleX:t,scaleY:t,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(r)},getLogo:function(){var n=this;return new Promise((function(e,t){var image=new Image;image.onload=function(){n.logo=image,e(image)},image.onerror=t,image.src=n.src[n.style]}))},save:function(){if(!this.n)return!1;Object(r.a)(this.canvas.toDataURL(),"".concat(Object(c.a)(),".png"))}}},d=t(5),component=Object(d.a)(h,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"cyberpunk2077"},[t("nya-container",{attrs:{title:"Cyberpunk 2077 图片制作"}},[t("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),t("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(e){return n.handleChange(e)}},model:{value:n.n,callback:function(e){n.n=e},expression:"n"}},[t("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                下载\n            ")])],1),t("div",{staticClass:"nya-subtitle mt-15"},[n._v("\n            选择 Logo 样式\n        ")]),t("el-radio-group",{model:{value:n.style,callback:function(e){n.style=e},expression:"style"}},[t("el-radio",{attrs:{label:"logo_en"}},[n._v("\n                英文\n            ")]),t("el-radio",{attrs:{label:"logo_en_2"}},[n._v("\n                英文2\n            ")]),t("el-radio",{attrs:{label:"logo_en_shadow"}},[n._v("\n                英文带阴影\n            ")]),t("el-radio",{attrs:{label:"logo_cn"}},[n._v("\n                中文\n            ")])],1)],1),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[t("div",{ref:"box",staticClass:"box"},[t("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);